<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>WeaveTrace — Home</title>
<link rel="stylesheet" href="styles.css">
</head><body>
<header class="topbar"><div class="brand">WeaveTrace</div><nav><a href="cart.html">Cart <span id="cart-count"></span></a></nav></header>
<main class="container">
  <section class="hero"><h1>Discover Tamil Nadu Sarees</h1><p>Click a product to view details and chat with the weaver.</p></section>
  <section><div class="grid" id="grid"></div></section>
</main>
<footer class="footer">WeaveTrace — Prototype</footer>
<script>
async function loadProducts(){ const res = await fetch('products.json'); return await res.json(); }
function updateCartCount(){ const c = JSON.parse(localStorage.getItem('weavetrace_cart')||'[]'); const total = c.reduce((s,i)=>s+i.qty,0); document.getElementById('cart-count').textContent = total?('('+total+')'):''; }
(async ()=>{ const products = await loadProducts(); const grid = document.getElementById('grid'); products.forEach(p=>{ const card=document.createElement('div'); card.className='card'; card.innerHTML=`<img src="${p.images[0]}" alt=""><h3>${p.saree_type}</h3><p class='muted'>${p.district}</p><p>₹${p.price}</p><div style='margin-top:auto'><a class='btn' href='product.html?id=${p.id}'>View</a> <button class='btn' onclick='addToCart(${p.id})' style='background:#fff;color:var(--primary);border:1px solid var(--primary)'>Add</button></div>`; grid.appendChild(card); }); updateCartCount(); window.addToCart = function(id){ let cart=JSON.parse(localStorage.getItem('weavetrace_cart')||'[]'); const idx=cart.findIndex(i=>i.id===id); if(idx===-1) cart.push({id,qty:1}); else cart[idx].qty++; localStorage.setItem('weavetrace_cart',JSON.stringify(cart)); updateCartCount(); alert('Added to cart'); } })();
</script>
</body></html>